
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2015-04-06
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Oryx &#x2013; Overview</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/readable/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/bootswatch.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />


		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->



	</head>

	<body class="page-overview project-oryx" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="index.html">Oryx 2</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li class="active"><a href="" title="Overview">Overview</a></li>
							<li ><a href="docs/index.html" title="Documentation">Documentation</a></li>
							<li ><a href="contribute.html" title="Contribute">Contribute</a></li>
							<li ><a href="download.html" title="Download">Download</a></li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="http://oryxproject.github.io/oryx/" id="bannerLeft"><h1>Oryx</h1></a>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li class="projectVersion version-date">Version: 2.0.0-SNAPSHOT</li>
				<li class="divider">|</li>
				<li class="publishDate version-date">Last Published: 2015-04-06</li>
			</ul>
		</div>
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar" data-spy="affix" data-offset-top="800">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#toc-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="nav-collapse collapse" id="toc-nav-collapse">
						<ul id="toc" class="nav">
						<li class="dropdown">
							<a href="#overview" title="Overview" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Overview <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#overview" title="Overview">Overview</a></li>
								<li class="divider"></li>
								<li><a href="#Module_Mapping" title="Module Mapping">Module Mapping</a></li>

							</ul>
						</li>
						<li class="divider-vertical"></li>
						<li class="dropdown">
							<a href="#lambda_tier_implementation" title="Lambda Tier Implementation" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Lambda Tier Implementation <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#lambda_tier_implementation" title="Lambda Tier Implementation">Lambda Tier Implementation</a></li>
								<li class="divider"></li>
								<li><a href="#Data_transport" title="Data transport">Data transport</a></li>
								<li><a href="#Batch_Layer" title="Batch Layer">Batch Layer</a></li>
								<li><a href="#Speed_Layer" title="Speed Layer">Speed Layer</a></li>
								<li><a href="#Serving_Layer" title="Serving Layer">Serving Layer</a></li>
								<li><a href="#Usage_and_Deployment" title="Usage and Deployment">Usage and Deployment</a></li>

							</ul>
						</li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#ml_tier_implementation" title="ML Tier Implementation">ML Tier Implementation</a></li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#end-to-end_application_implementation" title="End-to-end Application Implementation">End-to-end Application Implementation</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="page-header">
 <h1 id="overview">Overview</h1>
</div> 
<p>Oryx 2 is a realization of the lambda architecture built on <a class="externalLink" href="http://spark.apache.org">Apache Spark</a> and <a class="externalLink" href="http://kafka.apache.org">Apache Kafka</a>, but with specialization for real-time large scale machine learning. It is a framework for building applications, but also includes packaged, end-to-end applications for collaborative filtering, classification, regression and clustering.</p> 
<p>Oryx 2 is a rearchitecting and continuation of the original <a class="externalLink" href="http://github.com/cloudera/oryx">Oryx 1</a> project. The [Differences from Oryx 1 wiki](<a class="externalLink" href="https://github">https://github</a> .com/OryxProject/oryx/wiki/Differences-From-Oryx-1) describes changes.</p> 
<p>It consists of three <i>tiers</i>, each of which builds on the one below:</p> 
<ol style="list-style-type: decimal"> 
 <li>A generic lambda architecture tier, providing batch/speed/serving layers, which is not specific to machine learning</li> 
 <li>A specialization on top providing ML abstractions for hyperparameter selection, etc.</li> 
 <li>An end-to-end implementation of the same standard ML algorithms as an application (<a href="labs.yahoo.com/files/HuKorenVolinsky-ICDM08.pdf">ALS</a>, <a class="externalLink" href="http://en.wikipedia.org/wiki/Random_forest">random decision forests</a>, <a class="externalLink" href="http://en.wikipedia.org/wiki/K-means_clustering">k-means</a>) on top</li> 
</ol> 
<p>Viewed another way, it contains the three side-by-side cooperating <i>layers</i> of the lambda architecture too, as well as a connecting element:</p> 
<ol style="list-style-type: decimal"> 
 <li>A <i>Batch Layer</i>, which computes a new “result” (think model, but, could be anything) as a function of all historical data, and the previous result. This may be a long-running operation which takes hours, and runs a few times a day for example.</li> 
 <li>A <i>Speed Layer</i>, which produces and publishes incremental model updates from a stream of new data. These updates are intended to happen on the order of seconds.</li> 
 <li>A <i>Serving Layer</i>, which receives models and updates and implements a synchronous API exposing query operations on the result.</li> 
 <li>A data transport layer, which moves data between layers and receives input from external sources</li> 
</ol> 
<p>The project may be reused tier by tier: for example, the packaged app tier can be ignored, and it can be a framework for building new ML applications. It can be reused layer by layer too: for example, the Speed Layer can be omitted if a deployment does not need incremental updates. It can be modified piece-by-piece too: the collaborative filtering application’s model-building batch layer could be swapped for a custom implementation based on a new algorithm outside Spark MLlib while retaining the serving and speed layer implementations.</p> 
<p><img src="https://raw.github.com/wiki/OryxProject/oryx/Architecture.png" alt="" /></p> 
<div class="section"> 
 <h2 id="Module_Mapping">Module Mapping</h2> 
 <p>Major modules and their relation to tiers and layers:</p> 
 <table border="0" class="bodyTable table table-striped table-hover"> 
  <thead> 
   <tr class="a"> 
    <th align="right"> </th> 
    <th><i>Serving</i> </th> 
    <th><i>Speed</i> </th> 
    <th><i>Batch</i> </th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr class="b"> 
    <td align="right"><i>Binary</i> </td> 
    <td><tt>oryx-serving</tt> </td> 
    <td><tt>oryx-speed</tt> </td> 
    <td><tt>oryx-batch</tt> </td> 
   </tr> 
   <tr class="a"> 
    <td align="right"><i>App</i> </td> 
    <td><tt>oryx-app-serving</tt> </td> 
    <td><tt>oryx-app-mllib</tt> <tt>oryx-app</tt> </td> 
    <td><tt>oryx-app-mllib</tt> <tt>oryx-app</tt> </td> 
   </tr> 
   <tr class="b"> 
    <td align="right"><i>ML</i> </td> 
    <td> </td> 
    <td><tt>oryx-ml</tt> </td> 
    <td><tt>oryx-ml</tt> </td> 
   </tr> 
   <tr class="a"> 
    <td align="right"><i>Lambda</i> </td> 
    <td><tt>oryx-lambda-serving</tt> </td> 
    <td><tt>oryx-lambda</tt> </td> 
    <td><tt>oryx-lambda</tt> </td> 
   </tr> 
  </tbody> 
 </table> 
 <p>Supporting modules like <tt>oryx-common</tt>, <tt>oryx-app-common</tt>, <tt>oryx-api</tt>, <tt>oryx-app-api</tt> are not shown.</p> 
 <h1 id="lambda_tier_implementation">Lambda Tier Implementation</h1> 
</div> 
<div class="section"> 
 <h2 id="Data_transport">Data transport</h2> 
 <p>The data transport mechanism is an <a class="externalLink" href="http://kafka.apache.org/">Apache Kafka</a> topic. Any process – including but not limited to the serving layer – can put data onto the topic, to be seen by the speed and batch layers. Kafka topics are also used to publish both <i>models</i> and <i>model updates</i>, for consumption by the speed and serving layers.</p> 
</div> 
<div class="section"> 
 <h2 id="Batch_Layer">Batch Layer</h2> 
 <p>The batch layer is implemented as a <a class="externalLink" href="http://spark.apache.org/streaming/">Spark Streaming</a> process on a Hadoop cluster, which reads data from the input Kafka topic. The Streaming process necessarily has a very long period – hours or even a day. It uses Spark to save the current window of data to HDFS, and then combine with all historical data on HDFS, and initiate building of a new result. The result is written to HDFS, and, also published to a Kafka update topic.</p> 
</div> 
<div class="section"> 
 <h2 id="Speed_Layer">Speed Layer</h2> 
 <p>The speed layer is implemented as a Spark Streaming process as well, which also listens for data from the input Kafka topic. It has a much shorter period, on the order of seconds. It periodically loads a new model from the update topic and continually produces model updates. These are put back onto the update topic too.</p> 
</div> 
<div class="section"> 
 <h2 id="Serving_Layer">Serving Layer</h2> 
 <p>The serving layer listens for model and model updates on the update topic. It maintains model state in memory. It exposes an HTTP <a class="externalLink" href="http://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> API on top of methods that query the model in memory. Many of these may be deployed for scale. Each may also accept new data and write it to Kafka where it can be seen by all Speed layers. The different layer defaults are provided by a <tt>reference.conf</tt>. Applications are expected to provide their own conf file to specify properties that determine what application resources are required. This can be provided using an <tt>application.conf</tt> available in the classpath (which Typesafe Config loads automatically) or by providing a command line argument which specifies a config file to load (e.g. <tt>-Dconfig.file=&lt;path&gt;/cfg.conf</tt>) or even by specifying individual properties on the command line (e.g. <tt>-D&lt;property&gt;=&lt;value&gt;</tt>).</p> 
</div> 
<div class="section"> 
 <h2 id="Usage_and_Deployment">Usage and Deployment</h2> 
 <p>The application is written in Java, using Spark 1.2.x+, <a class="externalLink" href="http://hadoop.apache.org/">Hadoop</a> 2.5.x+, <a class="externalLink" href="http://tomcat.apache.org/">Tomcat</a> 8.x+, Kafka 0.8.2+, <a class="externalLink" href="http://zookeeper.apache.org/">Zookeeper</a> and more. Configuration uses a single <a class="externalLink" href="https://github.com/typesafehub/config">Typesafe Config</a> config file, wherein applications configure an entire deployment of the system. This includes implementations of key interface classes which implement the batch, speed, and serving logic. Applications package and deploy their implementations with each instance of the layer binaries. Each of these is a runnable Java <tt>.jar</tt> which starts all necessary services.</p> 
 <h1 id="ml_tier_implementation">ML Tier Implementation</h1> 
 <p>The ML tier is simply an implementation and specialization of the generic interfaces mentioned above, which implement common ML needs and then expose a different ML-specific interface for applications to fill in.</p> 
 <p>For example, it implements a batch layer update process that selects a test and training set automatically. It calls an app-supplied function to evaluate the model on the test set. It can automatically repeat this, and with different hyperparameter values, choosing the best result. It manages serialization of the model via <a class="externalLink" href="http://www.dmg.org/v4-2-1/GeneralStructure.html">PMML</a>.</p> 
 <h1 id="end-to-end_application_implementation">End-to-end Application Implementation</h1> 
 <p>In addition to being a framework, Oryx 2 contains complete implementations of the batch, speed and serving layer for three machine learning use cases. These are ready to deploy out-of-the-box, or to be used as the basis for a custom application:</p> 
 <ul> 
  <li>Collaborative filtering / recommendation based on Alternating Least Squares</li> 
  <li>Clustering based on k-means</li> 
  <li>Classification and regression based on random decision forests</li> 
 </ul> 
 <p>The REST API endpoints provided by the serving layer application implementations is documented in the <a class="externalLink" href="https://github.com/OryxProject/oryx/wiki/API-Endpoint-Reference">API Endpoint Reference</a> wiki. Example configuration that enables these applications is available in the <a class="externalLink" href="https://github.com/OryxProject/oryx/wiki/Configuration-Reference">Configuration Reference</a> wiki.</p> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span9 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2014-2015. All Rights Reserved.</p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/reflow-scroll.js"></script>

	<script src="./js/reflow-skin.js"></script>

	</body>
</html>
